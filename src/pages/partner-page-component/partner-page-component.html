<ion-header>
  <typeahead *ngIf="searchInterfaceOpen"
             (closeSearchInterfaceEmitter)="closeSearchInterface($event)"
             (getPartnersWithSearchTermEmitter)="getPartnersWithSearchTerm($event)"></typeahead>

  <div class="standard-header" *ngIf="!searchInterfaceOpen">
    <ion-navbar primary>
      <ion-buttons left>
        <button menuToggle *ngIf="!searchInterfaceOpen">
          <ion-icon name="menu" color="grey" class="menu-button-header"></ion-icon>
        </button>
      </ion-buttons>
      <ion-title *ngIf="!searchInterfaceOpen">
        {{title}}
      </ion-title>
      <input id="mySearchInputField"
             placeholder="Geben Sie einen Suchbegriff ein"
             (keyup)="inputToSuggestions($event)"
             [(ngModel)]="searchTerm"
             *ngIf="searchInterfaceOpen">
      <ion-buttons end>
        <button (click)="toggleMapAndList()">
          <ion-icon name="map" *ngIf='activeFilterFromMenu == "OFFLINEPARTNER"'></ion-icon>
        </button>
        <button (click)="searchInterfaceOpen = true">
          <ion-icon name="search" color="grey" class="search-button-header"></ion-icon>
        </button>
      </ion-buttons>
    </ion-navbar>
  </div>


</ion-header>



<ion-content>

  <div class="wrapper-div">

    <ion-row *ngIf="!searchSuggestionsOpen" class="filter-button-row">
      <ion-col class="filter-button left-button" (click)="toggleVisibilityDropdowns(0)">
        <div class="filter-button-text">KATEGORIE
          <ion-icon name="arrow-dropdown"></ion-icon>
        </div>
      </ion-col>
      <ion-col class="filter-button" (click)="toggleVisibilityDropdowns(1)">
        <div class="filter-button-text">SORTIEREN
          <ion-icon name="arrow-dropdown"></ion-icon>
        </div>
      </ion-col>
    </ion-row>

    <!--<div class="filter-dropdown" *ngIf="showDropdown[0]">-->
      <!--<div class="filterBy" (click)="filter('allpartners')">Alle Treffer</div>-->
      <!--<div class="filterBy" (click)="filter('ONLINEPARTNER')">Online-Partner</div>-->
      <!--<div class="filterBy" (click)="filter('OFFLINEPARTNER')" [class.disabled]="!locationChosen && !locationAvailable">-->
        <!--Vor-Ort-Partner-->
        <!--<div class="chooseLocationManually" (click)="chooseLocationManually()">ORT MANUELL WÄHLEN</div>-->
      <!--</div>-->
      <!--<div class="filterBy" (click)="filter('TRAVELOFFER')">Reiseangebote</div>-->
      <!--<div class="filterBy" (click)="filter('VEHICLEOFFER')">Autoangebote</div>-->
    <!--</div>-->
    <!--<div class="filter-dropdown" *ngIf="showDropdown[1]">-->
      <!--<div class="filterBy">A - Z</div>-->
      <!--<div class="filterBy" (click)="showPartner(partner)">Z - A</div>-->
    <!--</div>-->

    <div class="filter-dropdown" *ngIf="showDropdown[0]">
      <ion-row class="currentLocation">
        <ion-col>
          <div>Aktueller Standort</div>
        </ion-col>
        <ion-col>
          <ion-icon name = "map" (click)="chooseLocationManually()"></ion-icon>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <div>Alle auswählen</div>
        </ion-col>
        <ion-col>
          <div>Auswahl aufheben</div>
        </ion-col>
      </ion-row>
      <ion-row class="selection" [class.selected] = "beautySelected">Beauty</ion-row>
      <ion-row class="selection" [class.selected] = "entertainmentSelected">Entertainment</ion-row>
      <ion-row class="selection" [class.selected] = "healthSelected">Gesundheit</ion-row>
      <ion-row class="selection" [class.selected] = "livingSelected">Wohnen</ion-row>
      <ion-row class="selection" [class.selected] = "fashionSelected">Mode</ion-row>
      <ion-row class="selection" [class.selected] = "multimediaSelected">Multimedia</ion-row>
      <ion-row class="selection" [class.selected] = "leisureSelected">Sport & Freizeit</ion-row>
      <div>
        <button ion-button block color="primary">Auswahl anzeigen</button>
      </div>
    </div>

    <div class="initialSpinner" *ngIf="waitingForResults">
      <ion-spinner class="initialSpinner" (click)="hideDropdown()"></ion-spinner>
    </div>

    <div class="partner-table-wrapper" (click)="clickhideDropdown()" *ngIf="!showMap">
      <partner-table [partners]="displayedPartners"></partner-table>
    </div>

    <ion-infinite-scroll (ionInfinite)="doInfinite($event)" *ngIf="!showMap">
      <ion-infinite-scroll-content>
        <ion-spinner class="initialSpinner"></ion-spinner>
      </ion-infinite-scroll-content>
    </ion-infinite-scroll>

    <partner-map [partners]="localPartners" *ngIf="showMap"></partner-map>

  </div>
</ion-content>

